<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
    <title>Indigo</title>
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/bootstrap-switch.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
    <script src="js/jquery-1.12.2.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/d3.min.js"></script>
    <script src="js/d3pie.min.js"></script>
    <script src="js/Donut3D.js"></script>
    <script src="js/bootstrap-switch.js"></script>


</head>
<body>
    <nav class="navbar navbar-default navbar-custom navbar-static-top" role="navigation">
        <div class="container-fluid">
            <a class="navbar-brand" href="#" style="color:#FFF; padding:7px"><img src="imgs/ringlead-logo.png" /></a>
            <div class="navbar-header navbar-right">
                <ul class="nav navbar-nav">
                    <li><a href="test.htm" style="color:#FFF;">Home</a></li>
                    <li><a href="test.htm" style="color:#FFF;">About</a></li>
                    <li><a href="test.htm" style="color:#FFF;">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container">
        <div class="row" style="margin-top: 10px; margin-bottom: 10px;"><div class="col-md-12 table-section"><h4 class="no-margin vert-center">Data Foundation</h4></div></div>
        <div class="row" style="margin-top: 10px; margin-bottom: 10px;"><div class="col-md-12" style="text-align:center;">Verify company name and website domain. Account and contact enhancement services depend on a solid foundation on which to build upon.</div></div>
        <div class="row" style="margin-top: 10px; margin-bottom: 10px;"><div class="col-md-12"><div class="table-subsection no-margin"><h4 class="vert-center">Websites</h4></div></div></div>
        
        <div class="row"style="margin-top: 5px; margin-bottom: 5px;">
            <div class="col-md-3 no-margin no-padding">
                <div class="col-md-12" id="domainSample"><div class="table-subsection no-margin"><h4 class="vert-center">Starting Sample</h4></div></div>
                <div class="col-md-4 graph-centric" style="padding:20px;"><div style="background:lightgrey; height:160px; width:57.5px;"></div></div>
                <div class="col-md-8 graph-centric">
                    <table id="domainSampleTable" class="table vert-center">
                        <tr>
                            <th><div class="key" style="background:#289ea8;"></div>Supplied</th>
                            <td>728</td>
                        </tr>
                        <tr>
                            <th><div class="key" style="background:#6f7a79;"></div>Blank</th>
                            <td>272</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="col-md-3"><div id="domainSamplePie" style="height:240px;"></div></div>
            <div class="col-md-3 no-margin no-padding">
                <div class="col-md-12" id="domainSampleAnalysis"><div class="table-subsection no-margin"><h4 class="vert-center">Sample Analysis</h4></div></div>
                <div class="col-md-4 graph-centric" style="padding:20px;"><div style="background:lightgrey; height:160px; width:57.5px;"></div></div>
                <div class="col-md-8 graph-centric">
                    <table id="domainSampleAnalysisTable" class="table vert-center">
                        <tr>
                            <th><div class="key" style="background:#77d668;"></div>Good</th>
                            <td>632</td>
                        </tr>
                        <tr>
                            <th><div class="key" style="background:#ed4949;"></div>Bad</th>
                            <td>96</td>
                        </tr>
                        <tr>
                            <th><div class="key" style="background:#6f7a79;"></div>Blank</th>
                            <td>272</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="col-md-3"><div id="domainSampleAnalysisPie" style="height:240px;"></div></div>
        </div>
        
        <div class="row">
            <div class="col-md-3 no-margin no-padding">
                <div class="col-md-12" id="domainCorrected"><div class="table-subsection no-margin"><h4 class="vert-center">Correction Analysis</h4></div></div>
                <div class="col-md-4 graph-centric" style="padding:20px;"><div style="background:lightgrey; height:160px; width:57.5px;"></div></div>
                <div class="col-md-8 graph-centric">
                    <table class="table vert-center">
                        <tr>
                            <th><div class="key" style="background:#77d668;"></div>Usable</th>
                            <td>870</td>
                        </tr>
                        <tr>
                            <th><div class="key" style="background:#6f7a79;"></div>No Website</th>
                            <td>130</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="col-md-3"><div id="domainCorrectedPie" style="height:250px;"></div></div>
            <div class="col-md-3 no-margin no-padding">
                <div class="col-md-12" id="domainCorrectedAnalysis"><div class="table-subsection no-margin"><h4 class="vert-center">Correction Analysis</h4></div></div>
                <div class="col-md-4 graph-centric" style="padding:20px;"><div style="background:lightgrey; height:160px; width:57.5px;"></div></div>
                <div class="col-md-8 graph-centric">
                    <table class="table vert-center">
                        <tr>
                            <th><div class="key" style="background:#77d668;"></div>Good</th>
                            <td>632</td>
                        </tr>
                        <tr>
                            <th><div class="key" style="background:#17c89e;"></div>Filled</th>
                            <td>228</td>
                        </tr>
                        <tr>
                            <th><div class="key" style="background:#289ea8;"></div>Corrected</th>
                            <td>10</td>
                        </tr>
                        <tr>
                            <th><div class="key" style="background:#6f7a79;"></div>No Website</th>
                            <td>130</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="col-md-3"><div id="domainCorrectedAnalysisPie" style="height:250px;"></div></div>
            <!--<div class="col-md-3">
                <div>
                    <table id="companyTable" class="table table-reflow">
                        <tr>
                            <th>Company Names</th>
                            <td>100</td>
                        </tr>
                        <tr>
                            <th> </th>
                            <td> </td>
                        </tr>
                        <tr>
                            <th><div class="key" style="background:#77d668;"></div>Correct</th>
                            <td id="companyCorrect">43</td>
                        </tr>
                        <tr>
                            <th>Incorrect/Fixed<div class="key" style="background:#289ea8;"></div></th>
                            <td id="companyFixed">28</td>
                        </tr>
                        <tr>
                            <th>No Website<div class="key" style="background:#ed4949;"></div></th>
                            <td id="companyNoWebsite">15</td>
                        </tr>
                        <tr>
                            <th>Junk<div class="key" style="background:#6f7a79;"></div></th>
                            <td id="companyJunk">14</td>
                        </tr>
                        <tr>
                            <th>Usable</th>
                            <td id="companyUsable">71</td>
                        </tr>
                        <tr>
                            <th> </th>
                            <td> </td>
                        </tr>
                        <tr>
                            <th>Data Readiness</th>
                            <td id="companyReadiness"><b>71.00%</b></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="col-md-3" id="companyPieCon"><div id="companyPie" style="height:250px;"></div></div>-->
        </div>
    </div>
    <div class="container">
        <div class="row" style="margin-top: 10px; margin-bottom: 10px;"><div class="col-md-12 table-section"><h4 class="no-margin vert-center">Account Enhancement</h4></div></div>
        <div class="col-md-6">
            <div>
                <table id="companyTable" class="table table-reflow">
                    <tr>
                        <th>Append</th>
                        <th>Sample</th>
                        <th>Filled</th>
                        <th> </th>
                    </tr>
                    <tr>
                        <th>Firmagraphics</th>
                        <td>71</td>
                        <td>53</td>
                        <td>75%</td>
                    </tr>
                    <tr>
                        <th>LinkedIn</th>
                        <td>71</td>
                        <td>55</td>
                        <td>77%</td>
                    </tr>
                    <tr>
                        <th>Facebook</th>
                        <td>71</td>
                        <td>51</td>
                        <td>72%</td>
                    </tr>
                    <tr>
                        <th>Twitter</th>
                        <td>71</td>
                        <td>25</td>
                        <td>35%</td>
                    </tr>
                    <tr>
                        <th>Total Enhanced</th>
                        <td>71</td>
                        <td>66</td>
                        <td>93%</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row" style="margin-top: 10px; margin-bottom: 10px;"><div class="col-md-12 table-section"><h4 class="no-margin vert-center">Contact Enahncement</h4></div></div>
        <div class="col-md-6">
            <div>
                <table id="companyTable" class="table table-reflow">
                    <tr>
                        <th>Connect</th>
                        <th> </th>
                        <th> </th>
                        <th> </th>
                    </tr>
                    <tr>
                        <th> </th>
                        <th> </th>
                        <th> </th>
                        <th> </th>
                    </tr>
                    <tr>
                        <th>Total Records</th>
                        <td>71</td>
                        <td> </td>
                        <td> </td>
                    </tr>
                    <tr>
                        <th>Emails Appended</th>
                        <td>51</td>
                        <td>72%</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <th>Phones Appended</th>
                        <td>54</td>
                        <td>76%</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <th>Addresses Appended</th>
                        <td>51</td>
                        <td>72%</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <th>Titles Appended</th>
                        <td>9</td>
                        <td>13%</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <th>Social Appended</th>
                        <td>40</td>
                        <td>56%</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <th>Total Effected</th>
                        <td>67</td>
                        <td>94%</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <th> </th>
                        <td> </td>
                        <td> </td>
                        <td> </td>
                    </tr>
                    <tr>
                        <th>Expand Service</th>
                        <td> </td>
                        <td> </td>
                        <td> </td>
                    </tr>
                    <tr>
                        <th> </th>
                        <th>Count</th>
                        <th>Averages</th>
                        <td> </td>
                    </tr>
                    <tr>
                        <th>Unique websites</th>
                        <td>71</td>
                        <td> </td>
                        <td> </td>
                    </tr>
                    <tr>
                        <th>Websites with contacts</th>
                        <td>47</td>
                        <td>66%</td>
                        <td>Percent Filled</td>
                    </tr>
                    <tr>
                        <th>Total contacts</th>
                        <td>13307</td>
                        <td>283.1</td>
                        <td>Contacts per company</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row" style="margin-top: 10px; margin-bottom: 10px;"><div class="col-md-12 table-section"><h4 class="no-margin vert-center">Account Data Assesment</h4></div></div>
        <div id="cmpyBfr" class="col-md-6"></div>
        <div id="cmpyAfr" class="col-md-6"></div>
        <div id="RcrdBfr" class="col-md-6"></div>
        <div id="RcrdAfr" class="col-md-6"></div>
        <div id="FndBfr" class="col-md-6"></div>
        <div id="FndAfr" class="col-md-6"></div>
    </div>

    <footer class="footer-custom">
        <div class="container-fluid">
            &copy; Ringlead, Inc.
        </div>
    </footer>

    <script>
        var dmnSmplData = {
            Supplied: 728,
            Blank: 272
        }

        var dmnSmplAnData = {
            Good: 632,
            Bad: 96,
            Blank: 272
        }
        
        var dmnCorrData = {
            Usable: 870,
            Unusable: 130
        }
        
        var dmnCorrAnData = {
            Good: 632,
            Filled: 228,
            Corrected: 10,
            Blank: 130
        }

        var cmpyNmData = {
            Correct: 43,
            Fixed: 28,
            NoWebsite: 15,
            Junk: 14,
            Usable: 71
        }

        var accEnData = {
            Sample: 71,
            Firmagraphics: 53,
            Linkedin: 55,
            Facebook: 51,
            Twitter: 25,
            Total: 66
        }

        var cntactCnctEnData = {
            TotalRec: 71,
            Emails: 51,
            Phones: 54,
            Addresses: 51,
            Titles: 9,
            Social: 40,
            TotalEff: 67
        }

        var cntactExpdEnData = {
            UniqWebsites: 71,
            WebContacts: 47,
            TotalCont: 13307
        }

        var titleLvl = {
            CLevel: 412,
            Board: 114,
            SVP: 395,
            President: 113,
            VP: 120,
            Director: 788,
            Manager: 2564,
            Staff: 445,
            Assistant: 106,
            Intern: 0
        }

        titleDev = {
            Sales: 1022,
            Marketing: 118,
            Finance: 378,
            IT: 255,
            Legal: 161,
            Admin: 728,
            Content: 29,
            Communications: 57,
            Developer: 452,
            CustomerServ: 225
        }

        var domainColor = d3.scale.ordinal()
            .domain(["Correct", "Usable", "Filled", "Supplied", "Corrected", "No Website", "Junk", "Duplicate", "Provided", "Blank", "Unusable", "Good", "Bad"])
	        .range(["#77d668", "#77d668", "#17c89e", "#289ea8", "#289ea8", "#ed4949", "#6f7a79", "#ebae44", "#289ea8", "#6f7a79", "#6f7a79", "#77d668", "#ed4949"]);

        var companyNameColor = d3.scale.ordinal()
            .domain(["Correct", "Filled", "Incorrect/Fixed", "No Website", "Junk"])
	        .range(["#77d668", "#289ea8", "#289ea8", "#ed4949", "#6f7a79"]);

        function midPoint(coor1, coor2) {
            return [(coor1[0] + coor2[0]) / 2, (coor1[1] + coor2[1]) / 2]
        }

        function pointDistance(coor1, coor2) {
            return 10 < Math.sqrt(Math.pow(coor2[0] - coor1[0], 2) + Math.pow(coor2[1] - coor1[1], 2));
        }

        var domainSample = d3.select("#domainSamplePie")
            .append("svg")
            .append("g");

        domainSample.append("g")
	        .attr("class", "slices");
        domainSample.append("g")
	        .attr("class", "labels");
        domainSample.append("g")
            .attr("class", "title");
        domainSample
            .attr("transform", "translate(" + $('#domainSample').width() / 2 + "," + 120 + ")");

        var domainSampleAnalysis = d3.select("#domainSampleAnalysisPie")
	        .append("svg")
	        .append("g");

        domainSampleAnalysis.append("g")
	        .attr("class", "slices");
        domainSampleAnalysis.append("g")
	        .attr("class", "labels");
        domainSampleAnalysis.append("g")
            .attr("class", "title");
        domainSampleAnalysis
            .attr("transform", "translate(" + $('#domainSampleAnalysis').width() / 2 + "," + 120 + ")");

        var domainCorrected = d3.select("#domainCorrectedPie")
	        .append("svg")
	        .append("g");

        domainCorrected.append("g")
	        .attr("class", "slices");
        domainCorrected.append("g")
	        .attr("class", "labels");
        domainCorrected.append("g")
            .attr("class", "title");
        domainCorrected
            .attr("transform", "translate(" + $('#domainSampleAnalysis').width() / 2 + "," + 120 + ")");

        var domainCorrectedAnalysis = d3.select("#domainCorrectedAnalysisPie")
	        .append("svg")
	        .append("g");

        domainCorrectedAnalysis.append("g")
	        .attr("class", "slices");
        domainCorrectedAnalysis.append("g")
	        .attr("class", "labels");
        domainCorrectedAnalysis.append("g")
            .attr("class", "title");
        domainCorrectedAnalysis
            .attr("transform", "translate(" + $('#domainSampleAnalysis').width() / 2 + "," + 120 + ")");

        var companyPie = d3.select("#companyPie")
	        .append("svg")
	        .append("g");

        companyPie.append("g")
	        .attr("class", "slices");
        companyPie.append("g")
	        .attr("class", "labels");
        companyPie.append("g")
            .attr("class", "title");
        companyPie
            .attr("transform", "translate(" + $('#companyPie').width() / 2 + "," + 100 + ")");

        var width = 350,
            height = 350,
	        radius = Math.min(width, height) / 2;

        var pie = d3.layout.pie()
	        .sort(null)
	        .value(function (d) {
	            return d.value;
	        });

        var arc = d3.svg.arc()
	        .outerRadius(radius * 0.45)
	        .innerRadius(radius * 0.35);

        var outerArc = d3.svg.arc()
	        .innerRadius(radius * 0.5)
	        .outerRadius(radius * 0.5);



        var key = function (d) { return d.data.label; };

        domainSample.select(".title")
            .append("text")
            .text("Provided")
            .attr("text-anchor", "middle")
            .attr("fill", "#5f5f5f")
            .attr("transform", "translate(" + 0 + "," + 7 + ")")
            .style("font-size", "20px")
            .style("font-family", "helvetica");

        domainSampleAnalysis.select(".title")
            .append("text")
            .text("Analysis")
            .attr("text-anchor", "middle")
            .attr("fill", "#5f5f5f")
            .attr("transform", "translate(" + 0 + "," + 7 + ")")
            .style("font-size", "20px")
            .style("font-family", "helvetica");

        domainCorrected.select(".title")
            .append("text")
            .text("Corrected")
            .attr("text-anchor", "middle")
            .attr("fill", "#5f5f5f")
            .attr("transform", "translate(" + 0 + "," + 7 + ")")
            .style("font-size", "20px")
            .style("font-family", "helvetica");

        domainCorrectedAnalysis.select(".title")
            .append("text")
            .text("Analysis")
            .attr("text-anchor", "middle")
            .attr("fill", "#5f5f5f")
            .attr("transform", "translate(" + 0 + "," + 7 + ")")
            .style("font-size", "20px")
            .style("font-family", "helvetica");

        companyPie.select(".title")
            .append("text")
            .text("Company")
            .attr("text-anchor", "middle")
            .attr("fill", "#5f5f5f")
            .attr("transform", "translate(" + 0 + "," + 8 + ")")
            .style("font-size", "20px")
            .style("font-family", "helvetica");

        var domainSampleData = [
            { label: "Supplied", value: dmnSmplData.Supplied },
            { label: "Blank", value: dmnSmplData.Blank }
        ];

        var domainSampleAnalysisData = [
            { label: "Good", value: dmnSmplAnData.Good },
	        { label: "Bad", value: dmnSmplAnData.Bad },
            { label: "Blank", value: dmnSmplAnData.Blank }
        ];

        var domainCorrectedData = [
            { label: "Usable", value: dmnCorrData.Usable },
            { label: "Unusable", value: dmnCorrData.Unusable }
        ];

        var domainCorrectedAnalysisData = [
            { label: "Good", value: dmnCorrAnData.Good },
	        { label: "Filled", value: dmnCorrAnData.Filled },
            { label: "Corrected", value: dmnCorrAnData.Corrected },
            { label: "Blank", value: dmnCorrAnData.Blank }
        ]

        var companyPieData = [
            { label: "Correct", value: cmpyNmData.Correct },
	        { label: "Incorrect/Fixed", value: cmpyNmData.Fixed },
            { label: "No Website", value: cmpyNmData.NoWebsite },
            { label: "Junk", value: cmpyNmData.Junk }
        ];

        drawDomainSample(domainSampleData);

        drawDomainSampleAnalysis(domainSampleAnalysisData);

        drawDomainCorrected(domainCorrectedData);

        drawDomainCorrectedAnalysis(domainCorrectedAnalysisData);

        drawCompanyPie(companyPieData);

        function drawDomainSample(data) {
            var denominator = 0;

            for (i = 0; i < data.length; i++) {
                denominator = denominator + data[i].value;
            }

            /* ------- PIE SLICES -------*/
            var slice = domainSample.select(".slices").selectAll("path.slice")
		        .data(pie(data), key);

            slice.enter()
		        .insert("path")
		        .style("fill", function (d) { return domainColor(d.data.label); })
		        .attr("class", "slice");

            slice
		        .transition().duration(1000)
		        .attrTween("d", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {
		                return arc(interpolate(t));
		            };
		        })

            slice.exit()
		        .remove();

            /* ------- TEXT LABELS -------*/
            var text = domainSample.select(".labels").selectAll("text")
		        .data(pie(data), key);

            text.enter()
		        .append("text")
		        .attr("dy", ".35em")
		        .text(function (d) {
		            if (d.data.value === 0) {
		                return "";
		            } else {
		                return Math.round((d.data.value / denominator) * 100) + "%";
		            }
		        });

            function midAngle(d) {
                return d.startAngle + (d.endAngle - d.startAngle) / 2;
            }

            text.transition().duration(1000)
		        .attrTween("transform", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {

		                var d2 = interpolate(t);
		                var pos = outerArc.centroid(d2);
		                return "translate(" + pos + ")";
		            };
		        })
		        .styleTween("text-anchor", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {
		                var d2 = interpolate(t);
		                return midAngle(d2) < Math.PI ? "start" : "end";
		            };
		        });

            text.exit()
		        .remove();

        };

        function drawDomainSampleAnalysis(data) {
            var denominator = 0;

            for (i = 0; i < data.length; i++) {
                denominator = denominator + data[i].value;
            }

            /* ------- PIE SLICES -------*/
            var slice = domainSampleAnalysis.select(".slices").selectAll("path.slice")
		        .data(pie(data), key);

            slice.enter()
		        .insert("path")
		        .style("fill", function (d) { return domainColor(d.data.label); })
		        .attr("class", "slice");

            slice
		        .transition().duration(1000)
		        .attrTween("d", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {
		                return arc(interpolate(t));
		            };
		        })

            slice.exit()
		        .remove();

            /* ------- TEXT LABELS -------*/
            var text = domainSampleAnalysis.select(".labels").selectAll("text")
		        .data(pie(data), key);

            text.enter()
		        .append("text")
		        .attr("dy", ".35em")
		        .text(function (d) {
		            if (d.data.value === 0) {
		                return "";
		            } else {
		                return Math.round((d.data.value / denominator) * 100) + "%";
		            }
		        });

            function midAngle(d) {
                return d.startAngle + (d.endAngle - d.startAngle) / 2;
            }

            text.transition().duration(1000)
		        .attrTween("transform", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {

		                var d2 = interpolate(t);
		                var pos = outerArc.centroid(d2);
		                return "translate(" + pos + ")";
		            };
		        })
		        .styleTween("text-anchor", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {
		                var d2 = interpolate(t);
		                return midAngle(d2) < Math.PI ? "start" : "end";
		            };
		        });

            text.exit()
		        .remove();

        };

        function drawDomainCorrected (data) {
            var denominator = 0;

            for (i = 0; i < data.length; i++) {
                denominator = denominator + data[i].value;
            }

            /* ------- PIE SLICES -------*/
            var slice = domainCorrected.select(".slices").selectAll("path.slice")
		        .data(pie(data), key);

            slice.enter()
		        .insert("path")
		        .style("fill", function (d) { return domainColor(d.data.label); })
		        .attr("class", "slice");

            slice
		        .transition().duration(1000)
		        .attrTween("d", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {
		                return arc(interpolate(t));
		            };
		        })

            slice.exit()
		        .remove();

            /* ------- TEXT LABELS -------*/
            var text = domainCorrected.select(".labels").selectAll("text")
		        .data(pie(data), key);

            text.enter()
		        .append("text")
		        .attr("dy", ".35em")
		        .text(function (d) {
		            if (d.data.value === 0) {
		                return "";
		            } else {
		                return Math.round((d.data.value / denominator) * 100) + "%";
		            }
		        });

            function midAngle(d) {
                return d.startAngle + (d.endAngle - d.startAngle) / 2;
            }

            text.transition().duration(1000)
		        .attrTween("transform", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {

		                var d2 = interpolate(t);
		                var pos = outerArc.centroid(d2);
		                return "translate(" + pos + ")";
		            };
		        })
		        .styleTween("text-anchor", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {
		                var d2 = interpolate(t);
		                return midAngle(d2) < Math.PI ? "start" : "end";
		            };
		        });

            text.exit()
		        .remove();

        };

        function drawDomainCorrectedAnalysis(data) {
            var denominator = 0;

            for (i = 0; i < data.length; i++) {
                denominator = denominator + data[i].value;
            }

            /* ------- PIE SLICES -------*/
            var slice = domainCorrectedAnalysis.select(".slices").selectAll("path.slice")
		        .data(pie(data), key);

            slice.enter()
		        .insert("path")
		        .style("fill", function (d) { return domainColor(d.data.label); })
		        .attr("class", "slice");

            slice
		        .transition().duration(1000)
		        .attrTween("d", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {
		                return arc(interpolate(t));
		            };
		        })

            slice.exit()
		        .remove();

            /* ------- TEXT LABELS -------*/
            var text = domainCorrectedAnalysis.select(".labels").selectAll("text")
		        .data(pie(data), key);

            text.enter()
		        .append("text")
		        .attr("dy", ".35em")
		        .text(function (d) {
		            if (d.data.value === 0) {
		                return "";
		            } else {
		                return Math.round((d.data.value / denominator) * 100) + "%";
		            }
		        });

            function midAngle(d) {
                return d.startAngle + (d.endAngle - d.startAngle) / 2;
            }

            text.transition().duration(1000)
		        .attrTween("transform", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {

		                var d2 = interpolate(t);
		                var pos = outerArc.centroid(d2);
		                return "translate(" + pos + ")";
		            };
		        })
		        .styleTween("text-anchor", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {
		                var d2 = interpolate(t);
		                return midAngle(d2) < Math.PI ? "start" : "end";
		            };
		        });

            text.exit()
		        .remove();

        };

        function drawCompanyPie(data) {
            var denominator = 0;

            for (i = 0; i < data.length; i++) {
                denominator = denominator + data[i].value;
            }

            /* ------- PIE SLICES -------*/
            var slice = companyPie.select(".slices").selectAll("path.slice")
		        .data(pie(data), key);

            slice.enter()
		        .insert("path")
		        .style("fill", function (d) { return companyNameColor(d.data.label); })
		        .attr("class", "slice");

            slice
		        .transition().duration(1000)
		        .attrTween("d", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {
		                return arc(interpolate(t));
		            };
		        })

            slice.exit()
		        .remove();

            /* ------- TEXT LABELS -------*/
            var text = companyPie.select(".labels").selectAll("text")
		        .data(pie(data), key);

            text.enter()
		        .append("text")
		        .attr("dy", ".35em")
		        .text(function (d) {
		            if (d.data.value === 0) {
		                return "";
		            } else {
		                return Math.round((d.data.value / denominator) * 100) + "%";
		            }
		        });

            function midAngle(d) {
                return d.startAngle + (d.endAngle - d.startAngle) / 2;
            }

            text.transition().duration(1000)
		        .attrTween("transform", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {

		                var d2 = interpolate(t);
		                var pos = outerArc.centroid(d2);
		                return "translate(" + pos + ")";
		            };
		        })
		        .styleTween("text-anchor", function (d) {
		            this._current = this._current || d;
		            var interpolate = d3.interpolate(this._current, d);
		            this._current = interpolate(0);
		            return function (t) {
		                var d2 = interpolate(t);
		                return midAngle(d2) < Math.PI ? "start" : "end";
		            };
		        });

            text.exit()
		        .remove();

        };
        var cmpyBfr = new d3pie("cmpyBfr", {
            "header": {
                "title": {
                    "text": "Record Potential",
                    "color": "#696969",
                    "fontSize": 15,
                    "font": "helvetica"
                },
                "location": "pie-center",
                "titleSubtitlePadding": 2
            },
            "footer": {
                "color": "#999999",
                "fontSize": 10,
                "font": "open sans",
                "location": "bottom-left"
            },
            "size": {
                "canvasHeight": 540,
                "canvasWidth": 540,
                "pieInnerRadius": "71%",
                "pieOuterRadius": "68%"
            },
            "data": {
                "content": [
                    {
                        "label": "X-Ref",
                        "value": 10,
                        "color": "#fd9000"
                    },
                    {
                        "label": "Invalid",
                        "value": 10,
                        "color": "#d50000"
                    },
                    {
                        "label": "Corrected",
                        "value": 38,
                        "color": "#4148a4"
                    },
                    {
                        "label": "Verified",
                        "value": 42,
                        "color": "#009c14"
                    }
                ]
            },
            "labels": {
                "outer": {
                    "format": "label-percentage2",
                    "pieDistance": 6
                },
                "inner": {
                    "format": "none"
                },
                "mainLabel": {
                    "font": "helvetica",
                    "fontSize": 11
                },
                "percentage": {
                    "color": "#999999",
                    "font": "helvetica",
                    "fontSize": 11,
                    "decimalPlaces": 0
                },
                "value": {
                    "color": "#cccc43",
                    "font": "helvetica",
                    "fontSize": 11
                },
                "truncation": {
                    "enabled": true
                }
            },
            "tooltips": {
                "enabled": true,
                "type": "placeholder",
                "string": "{label}: {value}",
                "styles": {
                    "fadeInSpeed": 953
                }
            },
            "effects": {
                "pullOutSegmentOnClick": {
                    "effect": "linear",
                    "speed": 400,
                    "size": 8
                }
            }
        });
        var cmpyAfr = new d3pie("cmpyAfr", {
            "header": {
                "title": {
                    "text": "Record Potential",
                    "color": "#696969",
                    "fontSize": 15,
                    "font": "helvetica"
                },
                "location": "pie-center",
                "titleSubtitlePadding": 2
            },
            "footer": {
                "color": "#999999",
                "fontSize": 10,
                "font": "open sans",
                "location": "bottom-left"
            },
            "size": {
                "canvasHeight": 540,
                "canvasWidth": 540,
                "pieInnerRadius": "71%",
                "pieOuterRadius": "68%"
            },
            "data": {
                "content": [
                    {
                        "label": "X-Ref",
                        "value": 10,
                        "color": "#fd9000"
                    },
                    {
                        "label": "Invalid",
                        "value": 10,
                        "color": "#d50000"
                    },
                    {
                        "label": "Corrected",
                        "value": 38,
                        "color": "#4148a4"
                    },
                    {
                        "label": "Verified",
                        "value": 42,
                        "color": "#009c14"
                    }
                ]
            },
            "labels": {
                "outer": {
                    "format": "label-percentage2",
                    "pieDistance": 6
                },
                "inner": {
                    "format": "none"
                },
                "mainLabel": {
                    "font": "helvetica",
                    "fontSize": 11
                },
                "percentage": {
                    "color": "#999999",
                    "font": "helvetica",
                    "fontSize": 11,
                    "decimalPlaces": 0
                },
                "value": {
                    "color": "#cccc43",
                    "font": "helvetica",
                    "fontSize": 11
                },
                "truncation": {
                    "enabled": true
                }
            },
            "tooltips": {
                "enabled": true,
                "type": "placeholder",
                "string": "{label}: {value}",
                "styles": {
                    "fadeInSpeed": 953
                }
            },
            "effects": {
                "pullOutSegmentOnClick": {
                    "effect": "linear",
                    "speed": 400,
                    "size": 8
                }
            }
        });
        var RcrdBfr = new d3pie("RcrdBfr", {
            "header": {
                "title": {
                    "text": "Record Potential",
                    "color": "#696969",
                    "fontSize": 15,
                    "font": "helvetica"
                },
                "location": "pie-center",
                "titleSubtitlePadding": 2
            },
            "footer": {
                "color": "#999999",
                "fontSize": 10,
                "font": "open sans",
                "location": "bottom-left"
            },
            "size": {
                "canvasHeight": 540,
                "canvasWidth": 540,
                "pieInnerRadius": "71%",
                "pieOuterRadius": "68%"
            },
            "data": {
                "content": [
                    {
                        "label": "X-Ref",
                        "value": 10,
                        "color": "#fd9000"
                    },
                    {
                        "label": "Invalid",
                        "value": 10,
                        "color": "#d50000"
                    },
                    {
                        "label": "Corrected",
                        "value": 38,
                        "color": "#4148a4"
                    },
                    {
                        "label": "Verified",
                        "value": 42,
                        "color": "#009c14"
                    }
                ]
            },
            "labels": {
                "outer": {
                    "format": "label-percentage2",
                    "pieDistance": 6
                },
                "inner": {
                    "format": "none"
                },
                "mainLabel": {
                    "font": "helvetica",
                    "fontSize": 11
                },
                "percentage": {
                    "color": "#999999",
                    "font": "helvetica",
                    "fontSize": 11,
                    "decimalPlaces": 0
                },
                "value": {
                    "color": "#cccc43",
                    "font": "helvetica",
                    "fontSize": 11
                },
                "truncation": {
                    "enabled": true
                }
            },
            "tooltips": {
                "enabled": true,
                "type": "placeholder",
                "string": "{label}: {value}",
                "styles": {
                    "fadeInSpeed": 953
                }
            },
            "effects": {
                "pullOutSegmentOnClick": {
                    "effect": "linear",
                    "speed": 400,
                    "size": 8
                }
            }
        });
        var RcrdAfr = new d3pie("RcrdAfr", {
            "header": {
                "title": {
                    "text": "Record Potential",
                    "color": "#696969",
                    "fontSize": 15,
                    "font": "helvetica"
                },
                "location": "pie-center",
                "titleSubtitlePadding": 2
            },
            "footer": {
                "color": "#999999",
                "fontSize": 10,
                "font": "open sans",
                "location": "bottom-left"
            },
            "size": {
                "canvasHeight": 540,
                "canvasWidth": 540,
                "pieInnerRadius": "71%",
                "pieOuterRadius": "68%"
            },
            "data": {
                "content": [
                    {
                        "label": "X-Ref",
                        "value": 10,
                        "color": "#fd9000"
                    },
                    {
                        "label": "Invalid",
                        "value": 10,
                        "color": "#d50000"
                    },
                    {
                        "label": "Corrected",
                        "value": 38,
                        "color": "#4148a4"
                    },
                    {
                        "label": "Verified",
                        "value": 42,
                        "color": "#009c14"
                    }
                ]
            },
            "labels": {
                "outer": {
                    "format": "label-percentage2",
                    "pieDistance": 6
                },
                "inner": {
                    "format": "none"
                },
                "mainLabel": {
                    "font": "helvetica",
                    "fontSize": 11
                },
                "percentage": {
                    "color": "#999999",
                    "font": "helvetica",
                    "fontSize": 11,
                    "decimalPlaces": 0
                },
                "value": {
                    "color": "#cccc43",
                    "font": "helvetica",
                    "fontSize": 11
                },
                "truncation": {
                    "enabled": true
                }
            },
            "tooltips": {
                "enabled": true,
                "type": "placeholder",
                "string": "{label}: {value}",
                "styles": {
                    "fadeInSpeed": 953
                }
            },
            "effects": {
                "pullOutSegmentOnClick": {
                    "effect": "linear",
                    "speed": 400,
                    "size": 8
                }
            }
        });
        var FndBfr = new d3pie("FndBfr", {
            "header": {
                "title": {
                    "text": "Record Potential",
                    "color": "#696969",
                    "fontSize": 15,
                    "font": "helvetica"
                },
                "location": "pie-center",
                "titleSubtitlePadding": 2
            },
            "footer": {
                "color": "#999999",
                "fontSize": 10,
                "font": "open sans",
                "location": "bottom-left"
            },
            "size": {
                "canvasHeight": 540,
                "canvasWidth": 540,
                "pieInnerRadius": "71%",
                "pieOuterRadius": "68%"
            },
            "data": {
                "content": [
                    {
                        "label": "X-Ref",
                        "value": 10,
                        "color": "#fd9000"
                    },
                    {
                        "label": "Invalid",
                        "value": 10,
                        "color": "#d50000"
                    },
                    {
                        "label": "Corrected",
                        "value": 38,
                        "color": "#4148a4"
                    },
                    {
                        "label": "Verified",
                        "value": 42,
                        "color": "#009c14"
                    }
                ]
            },
            "labels": {
                "outer": {
                    "format": "label-percentage2",
                    "pieDistance": 6
                },
                "inner": {
                    "format": "none"
                },
                "mainLabel": {
                    "font": "helvetica",
                    "fontSize": 11
                },
                "percentage": {
                    "color": "#999999",
                    "font": "helvetica",
                    "fontSize": 11,
                    "decimalPlaces": 0
                },
                "value": {
                    "color": "#cccc43",
                    "font": "helvetica",
                    "fontSize": 11
                },
                "truncation": {
                    "enabled": true
                }
            },
            "tooltips": {
                "enabled": true,
                "type": "placeholder",
                "string": "{label}: {value}",
                "styles": {
                    "fadeInSpeed": 953
                }
            },
            "effects": {
                "pullOutSegmentOnClick": {
                    "effect": "linear",
                    "speed": 400,
                    "size": 8
                }
            }
        });
        var FndAfr = new d3pie("FndAfr", {
            "header": {
                "title": {
                    "text": "Record Potential",
                    "color": "#696969",
                    "fontSize": 15,
                    "font": "helvetica"
                },
                "location": "pie-center",
                "titleSubtitlePadding": 2
            },
            "footer": {
                "color": "#999999",
                "fontSize": 10,
                "font": "open sans",
                "location": "bottom-left"
            },
            "size": {
                "canvasHeight": 540,
                "canvasWidth": 540,
                "pieInnerRadius": "71%",
                "pieOuterRadius": "68%"
            },
            "data": {
                "content": [
                    {
                        "label": "X-Ref",
                        "value": 10,
                        "color": "#fd9000"
                    },
                    {
                        "label": "Invalid",
                        "value": 10,
                        "color": "#d50000"
                    },
                    {
                        "label": "Corrected",
                        "value": 38,
                        "color": "#4148a4"
                    },
                    {
                        "label": "Verified",
                        "value": 42,
                        "color": "#009c14"
                    }
                ]
            },
            "labels": {
                "outer": {
                    "format": "label-percentage2",
                    "pieDistance": 6
                },
                "inner": {
                    "format": "none"
                },
                "mainLabel": {
                    "font": "helvetica",
                    "fontSize": 11
                },
                "percentage": {
                    "color": "#999999",
                    "font": "helvetica",
                    "fontSize": 11,
                    "decimalPlaces": 0
                },
                "value": {
                    "color": "#cccc43",
                    "font": "helvetica",
                    "fontSize": 11
                },
                "truncation": {
                    "enabled": true
                }
            },
            "tooltips": {
                "enabled": true,
                "type": "placeholder",
                "string": "{label}: {value}",
                "styles": {
                    "fadeInSpeed": 953
                }
            },
            "effects": {
                "pullOutSegmentOnClick": {
                    "effect": "linear",
                    "speed": 400,
                    "size": 8
                }
            }
        });
        var cnctEnPie = new d3pie("cnctEnPie", {
            "header": {
                "title": {
                    "text": "Record Potential",
                    "color": "#696969",
                    "fontSize": 15,
                    "font": "helvetica"
                },
                "location": "pie-center",
                "titleSubtitlePadding": 2
            },
            "footer": {
                "color": "#999999",
                "fontSize": 10,
                "font": "open sans",
                "location": "bottom-left"
            },
            "size": {
                "canvasHeight": 515,
                "canvasWidth": 515,
                "pieInnerRadius": "71%",
                "pieOuterRadius": "68%"
            },
            "data": {
                "content": [
                    {
                        "label": "X-Ref",
                        "value": 10,
                        "color": "#fd9000"
                    },
                    {
                        "label": "Invalid",
                        "value": 10,
                        "color": "#d50000"
                    },
                    {
                        "label": "Corrected",
                        "value": 38,
                        "color": "#4148a4"
                    },
                    {
                        "label": "Verified",
                        "value": 42,
                        "color": "#009c14"
                    }
                ]
            },
            "labels": {
                "outer": {
                    "format": "label-percentage2",
                    "pieDistance": 6
                },
                "inner": {
                    "format": "none"
                },
                "mainLabel": {
                    "font": "helvetica",
                    "fontSize": 11
                },
                "percentage": {
                    "color": "#999999",
                    "font": "helvetica",
                    "fontSize": 11,
                    "decimalPlaces": 0
                },
                "value": {
                    "color": "#cccc43",
                    "font": "helvetica",
                    "fontSize": 11
                },
                "truncation": {
                    "enabled": true
                }
            },
            "tooltips": {
                "enabled": true,
                "type": "placeholder",
                "string": "{label}: {value}",
                "styles": {
                    "fadeInSpeed": 953
                }
            },
            "effects": {
                "pullOutSegmentOnClick": {
                    "effect": "linear",
                    "speed": 400,
                    "size": 8
                }
            }
        });
        var acctEnPie = new d3pie("acctEnPie", {
            "header": {
                "title": {
                    "text": "Record Potential",
                    "color": "#696969",
                    "fontSize": 15,
                    "font": "helvetica"
                },
                "location": "pie-center",
                "titleSubtitlePadding": 2
            },
            "footer": {
                "color": "#999999",
                "fontSize": 10,
                "font": "open sans",
                "location": "bottom-left"
            },
            "size": {
                "canvasHeight": 222,
                "canvasWidth": 222,
                "pieInnerRadius": "71%",
                "pieOuterRadius": "68%"
            },
            "data": {
                "content": [
                    {
                        "label": "X-Ref",
                        "value": 10,
                        "color": "#fd9000"
                    },
                    {
                        "label": "Invalid",
                        "value": 10,
                        "color": "#d50000"
                    },
                    {
                        "label": "Corrected",
                        "value": 38,
                        "color": "#4148a4"
                    },
                    {
                        "label": "Verified",
                        "value": 42,
                        "color": "#009c14"
                    }
                ]
            },
            "labels": {
                "outer": {
                    "format": "label-percentage2",
                    "pieDistance": 6
                },
                "inner": {
                    "format": "none"
                },
                "mainLabel": {
                    "font": "helvetica",
                    "fontSize": 11
                },
                "percentage": {
                    "color": "#999999",
                    "font": "helvetica",
                    "fontSize": 11,
                    "decimalPlaces": 0
                },
                "value": {
                    "color": "#cccc43",
                    "font": "helvetica",
                    "fontSize": 11
                },
                "truncation": {
                    "enabled": true
                }
            },
            "tooltips": {
                "enabled": true,
                "type": "placeholder",
                "string": "{label}: {value}",
                "styles": {
                    "fadeInSpeed": 953
                }
            },
            "effects": {
                "pullOutSegmentOnClick": {
                    "effect": "linear",
                    "speed": 400,
                    "size": 8
                }
            }
        });
    </script>

</body>
</html>
